{{#sd-promise-wait-overlay promiseState=summaryDataStore classNames="sd-promise-wait-overlay--sm"}}
    {{#each timelinesConfiguration key="timeline.name" as |timelineConfiguration|}}
        <div class="wsd-metric-timelines__timeline">
            <div class="wsd-metric-timelines__content">
                {{#if canRenderTimelines}}
                    <svg class="wsd-metric-timelines__chart" width="{{timelinesWidth}}" height="{{timelinesHeight}}">
                        {{#if timelineConfiguration.timeline}}
                            {{sd-viz-histogram-series
                                height=timeSeriesHeight
                                width=timelinesWidth
                                timestampProp="t"
                                valueProp="v"
                                translateY=0
                                data=timelineConfiguration.timeline.timeSeries
                            }}
                        {{/if}}
                    </svg>
                {{/if}}
            </div>

            <div class="wsd-metric-timelines__controls">
                <div class="wsd-metric-timelines__name">
                   {{timelineConfiguration.timeline.name}}
                </div>
                <div class="wsd-metric-timelines__value">
                    {{number-to-string timelineConfiguration.timeline.totalValue decimalCount=1 isMultiplierOmitted=true}}
                    <span class="wsd-metric-timelines__value-multiplier">
                        {{number-to-string timelineConfiguration.timeline.totalValue decimalCount=1 isValueOmitted=true}}
                    </span>
                </div>
                <div class="wsd-metric-timelines__button">
                    {{sd-button
                        iconName="close"
                        classNames="sd-button--fab sd-button--highlight-on-hover"
                        size="sm"
                        click=(action remove timelineConfiguration.timeline.name)
                    }}
                </div>
            </div>
        </div>
    {{/each}}
{{/sd-promise-wait-overlay}}

<div class="wsd-metric-timelines__timeline">
    <div class="wsd-metric-timelines__content">
        {{#if summaryDataStore.hasLoaded}}
            <div class="wsd-metric-timelines__overlay" style={{overlayStyle}}>
                {{sd-viz-timeline
                    timeline=timeline
                    timelinesWidth=timelinesWidth
                    from=captureTimeWindow.from
                    to=captureTimeWindow.to
                    selectedFrom=selectedTimeWindow.from
                    selectedTo=selectedTimeWindow.to
                    select=(action selectTimeWindow)
                }}
            </div>
        {{/if}}
    </div>
    <div class="wsd-metric-timelines__controls">
    </div>
</div>
